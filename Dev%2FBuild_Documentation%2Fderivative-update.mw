{{Header}}
{{#seo:
|description=derivative-update, a secure Git repository updater for derivative-maker. Supports signed tag, branch, and commit updates with digital software signature verification, submodule synchronization, and automatic rollback on errors.
}}
{{title|title=
derivative-update - Source Code Updater
}}
{{build_mininav}}
{{intro|
<code>derivative-update</code> is a secure command-line tool for updating a derivative-maker Git repository and its submodules.  
It supports updating to specific signed commits, branches, or tags with verification, submodule synchronization, and rollback protection in case of errors. This tool ensures a consistent, trusted codebase.
}}

'''Purpose:'''

<code>derivative-update</code> safely updates a derivative-maker Git repository (and its submodules) to a specific signed commit, branch, or tag, while verifying integrity and rolling back on errors.

'''Key functions:'''

* <u>Checks environment:</u> Ensures it is not run as root and that the repository is clean unless explicitly allowed to have uncommitted changes.
* <u>Performs safety checks:</u> Runs Git sanity test to verify repository state and digital software signatures.
* <u>Fetches updates:</u> Retrieves latest changes from remote repository and submodules.
* <u>Handles tag updates:</u> Verifies and checks out the tag, then updates submodules.
* <u>Handles branch updates:</u> Checks out the branch, fast-forwards to upstream, verifies commit, and updates submodules.
* <u>Submodule synchronization:</u> Ensures submodule URLs match <code>.gitmodules</code> and updates them to recorded commits.
* <u>Error recovery:</u> If verification or updates fail, resets repository to a known good commit.
* <u>Final checks:</u> Ensures no unexpected uncommitted changes remain and runs <code>git describe</code> for informational purposes.

'''Usage:'''

<code>derivative-update</code> can be found in the root of <code>derivative-maker</code> source code folder.

Example. To update to the latest signed git tag.

{{CodeSelect|code=
./derivative-update --tag latest
}}

'''Options:'''

* <u>Parses update options:</u> Supports:
** --tag <tag>       → Move to a specific signed tag
** --tag latest      → Move to the latest signed tag
** --ref <ref>       → Move to a specific commit or branch
** --update-only     → Only update submodules

'''Summary:'''

<code>derivative-update</code> safely updates code and submodules to the requested state with verification and rollback protection.

{{reflist|close=1}}
{{Footer}}
[[Category:Development]]