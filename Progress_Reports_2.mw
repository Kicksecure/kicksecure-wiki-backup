{{Header}}
{{title|title=
Progress Reports 2
}}
{{#seo:
|description=Overview on the continuous progress for Kicksecure (and Whonix) with individual specific contributions for content, research, implementation etc
|image=Page-progress-reports-thumb.jpg
}}
{{devwiki}}
{{about_mininav}}
<div class="mininav">
* [[#arraybolt3|arraybolt3]]
* [[#Hans|Hans]]
* [[#nurmagoz|nurmagoz]]
</div>
[[File:Page-progress-reports-thumb.jpg|thumb|200px]]
{{intro|
On this page we give an overview on the continuous progress for Kicksecure (and Whonix) on the most active contributors.
}}

= arraybolt3 =
== 2025-10-12 ==
=== Research what is needed to get port from gpg to sequoia-pgp ===
Date: 2025-10-12

Wrote down some suggestions, created a file for tracking progress, and discussed next steps with Patrick.

=== Create Tor version check and update script ===
Date: 2025-10-12

Made a Python script that detects if the version of Tor available from torproject.org is newer than the version in the Kicksecure repositories, and downloads the update into the repository if so.

=== More debugging of Qubes VM shutdown issues with environment fix patch ===
Date: 2025-10-12

Found the root cause of the issue, but I'm still not sure why the code in question is causing the issue. Marek suggested some workarounds which I'll be testing soon.

=== Isolate log filtering code in systemcheck from normal users ===
Date: 2025-10-12

Split out most of the log processing into a new script that runs as user <code>systemcheck</code>. That script can be called by standard users via leaprun, and it in turn can read the system logs, but standard users cannot read system logs. This should prevent access to unhashed kernel pointers, at least through the system logs.

=== Fix sysmaint manual login and related greetd issues ===
Date: 2025-10-12

Patrick discovered that one could log into a full desktop session with the sysmaint user by restarting greetd. Determined why this was happening and fixed it. Also fixed greetd startup when sysmaint autologin is disabled.

=== Fix volume indicator in sysmaint session changing color on hover ===
Date: 2025-10-12

The default Waybar configuration on which our config was based had an unnecessary styling rule that made the volume indicator change color on hover. Removed the rule.

== 2025-10-11 ==
=== Rework keyboard layout handling in Calamares ===
Date: 2025-10-11

Adjusted our keyboard layout helper code so that the keyboard layout was properly set in /etc/default/keyboard and in the labwc compositor. The new code should now support locales that use multiple keyboard layouts by default, and should also work with keyboard layout variants.

=== Further discussion of stalled Qubes OS template shutdown issue ===
Date: 2025-10-11

Determined that the environment variables we needed were available over Varlink. Discussed with Marek whether a script-based solution or the use of Varlink would be worthwhile for fixing the issue.

== 2025-10-10 ==
=== Debug locked-up shutdown of Qubes OS VMs after adding the environment import patch ===
Date: 2025-10-10

Marek discovered that the systemd environment import patch to qubes-gui-runuser resulted in shutdown getting stalled for a minute and a half in some instances. Attempted to determine why, and discussed possible solutions.

=== Fix flickering in Qt apps on Qubes OS triggered by event buffering ===
Date: 2025-10-10

Added some code to qubes-gui-daemon to allow instant passthrough of a few X messages to fix the flicker issue.

=== Add back VirtualBox guest utilities to Kicksecure ISO ===
Date: 2025-10-10

Determined why the VirtualBox guest utilities weren't being installed on the Kicksecure ISO in the first place, fixed the issue that kept them from being installable, and added them. Verified they were present on a newly built ISO.

=== Add display settings button to sysmaint-panel ===
Date: 2025-10-10

You can now launch wdisplays by clicking the display settings button in sysmaint-panel.

== 2025-10-09 ==
=== Discuss solutions for Calamares keyboard layout set failure ===
Date: 2025-10-09

Calamares' keyboard layout settings currently do not work under Wayland due to Debian disabling the mechanism Calamres uses to make keyboard layout changes. Described the issue to Patrick and mentioned possible solutions.

=== Ensure Calamares language setup worked as expected ===
Date: 2025-10-09

Both GUI and CLI modes of user and sysmaint sessions obeyed Calamares' language settings.

=== Investigate debian.sources only being readable by root ===
Date: 2025-10-09

Could not reproduce issue.

=== Create setxkbmap alternative for labwc ===
Date: 2025-10-09

Created set-labwc-keymap, for setting the keyboard layout with labwc. Can make both temporary and persistent changes. Supports keymap options and variants.

=== Research making left click bring up sdwdate-gui menu ===
Date: 2025-10-09

Determined that this was not possible at the moment and recorded why in the corresponding task. Changed a UI string so that users know to right-click on the icon.

=== Add LXQt config and on-screen keyboard to sysmaint-panel ===
Date: 2025-10-09

Added buttons to sysmaint-panel for toggling the on-screen keyboard and launching lxqt-config.

== 2025-10-08 ==
=== Fix Qubes Update failure on Whonix templates ===
Date: 2025-10-08

The ten-second wait added to the Tor startup process was causing the updater to regularly fail on Whonix templates. Changed qubes.UpdatesProxy in Whonix from a symlink to a script that would wait to allow updates to begin until Tor was up-and-running in sys-whonix.

=== Add an on-screen keyboard to Kicksecure and Whonix ===
Date: 2025-10-08

After much research, decided to choose wvkbd as the keyboard to ship. Created a script and desktop files for starting and stopping it.

=== Fix bindp compilation warning caused by incorrect postinst compilation method ===
Date: 2025-10-08

We were embedding a gcc command into the postinst script rather than using the compilation procedure in bindp's Makefile. Fixed this.

=== Finish preparing qubes-gui-runuser.c env var code for review ===
Date: 2025-10-08

Did more testing, fixed remaining TODOs. Pushed the latest version of the env var code and marked it as ready for review.

== 2025-10-07 ==
=== Polish qubes-gui-runuser.c env var code, research slab_debug security concerns ===
Date: 2025-10-07

Fixed several bugs in the draft implementation of the environment variable import code from yesterday, and got the new implementation to work in a Debian 13 Xfce template. Also did substantial research into security concerns around the <code>slab_debug</code> kernel parameter, and how to mitigate them best. Requested that the Debian kernel team backport a new pointer hashing boot parameter from kernel 6.17 into the Trixie stable kernel.

== 2025-10-06 ==
=== Create draft implementation for importing env vars from systemd in qubes-gui-runuser.c ===
Date: 2025-10-06

The preliminary fix for the environment variable bug in Qubes was insufficient because it meant now environment variables from systemd were being clobbered with those from /etc/profile.d. The intended behavior was that environment variables from systemd should be imported, then augmented by /etc/profile.d. Marek suggested implementing code to do this in qubes-gui-runuser.c, using D-Bus to communicate with systemd to get the environment variables and export them into the session. I created an initial rough draft of this implementation and posted it for initial review.

=== Attempt to debug kloak-related systemd unit ordering cycle ===
Date: 2025-10-06

Installed an older version of kloak into a Debian 13 GNOME VM. Could not reproduce issue, waiting on more info.

=== Remove sanitizers from compiled code ===
Date: 2025-10-06

We were enabling sanitizers such as AddressSanitizer and UndefinedBehaviorSanitizer as a hardening measure, but it turns out this actually made programs less secure and that these sanitizers are not intended for production code. Disabled C sanitizers on all of our C code.

== 2025-10-05 ==
=== Investigate Qubes input event buffering flicker bug with Qt ===
Date: 2025-10-05

Previously I discovered that Qt apps had some odd flickering behavior with some menus when input event buffering was enabled. Attempted to find the root cause, the cause hasn't been identified for certain but a possible problem has been identified. Discussed it with Marek briefly.

=== Test socat's suitability for use as a DNS proxy in sys-net ===
Date: 2025-10-05

Got socat working so that IPv6 DNS on an IPv6 network worked. Discussed the suitability of this solution with Marek.

=== Debug, create preliminary fix for Qubes-Whonix file manager launch bug ===
Date: 2025-10-05

Marek discovered that the default file manager in Whonix 18 was Catfish, when it should be PCManFM-Qt. After much study it was discovered this was the result of an outdated xdg override combined with an environment variable loading issue in Qubes OS itself. Filed a bug report for the environment variable load issue, discussed possible ways of fixing it with Marek, and submitted a PR. A different approach than the one provided in the PR will need to be used in the long run.

== 2025-10-04 ==
=== Test Qubes OS IPv6 DNS PRs ===
Date: 2025-10-04

Closely read through, polished, and tested the IPv6 DNS PRs from 3nprob. Unfortunately the approach being used by them is insufficient on its own due to some routers exposing a DNS server on a link-local IPv6 address, which cannot be properly targetted by a DNAT rule. Some sort of manual forwarding using a tool such as socat will likely be required.

= Footnotes =
<references />
{{Footer}}