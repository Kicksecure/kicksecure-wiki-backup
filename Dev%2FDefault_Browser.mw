{{Header}}
{{title|title=
{{project_name_short}} Default Browser - Development Considerations
}}
{{#seo:
|description=
Exploring the ideal default browser for {{project_name_short}} with a focus on security and privacy, Firefox vs Chromium, browser hardening, considering user freedom, maintainability, security, privacy, no phone home.
}}
{{intro|
Exploring the ideal default browser for {{project_name_short}} with a focus on security and privacy, Firefox vs Chromium, browser hardening, considering user freedom, maintainability, security, privacy, no phone home.
}}
= {{project_name_short}} Default Browser Considerations =
== Introduction ==
[[Kicksecure]] is primarily a security focused Linux distribution. Preferring security over privacy if such a decision is unavoidable. However, {{project_name_short}} will never implement outrageous privacy violations. It will even provider slightly better privacy than most other Linux distributions (such as no popularity contest installed), but otherwise no huge efforts to optimize privacy such as in {{whonix}}. (And yet, {{project_name_short}} would be a suitable host for {{project_name_long}} until {{whonix_wiki
|wikipage=Whonix-Host
|text=Whonix-Host
}} materializes. No contradiction here since {{project_name_long}} works fine on top of any secure Linux distribution that does not implement outrageous privacy violations.)

[https://madaidans-insecurities.github.io/firefox-chromium.html Chromium is more secure than Firefox.] <ref>
[[Dev/Chromium#Firefox_and_Chromium_Security]]
</ref> Therefore would be the natural choice as default browser for Kicksecure.

[https://forums.whonix.org/t/very-hard-to-notice-phishing-scam-firefox-tor-browser-url-not-showing-real-domain-name-homograph-attack-punycode/8373 very hard to notice Phishing Scam - Firefox / Tor Browser URL not showing real Domain Name - Homograph attack (Punycode)]

Even if Firefox would provide better privacy than Chromium, this would still not speak in favor of choosing Firefox as the only browser installed by default in {{project_name_short}} because as elaborated in the first paragraph in this chapter, {{project_name_short}} is primarily a security focused Linux distribution.

Other browsers not available from packages.debian.org are not considered (at least not in initial versions) because {{project_name_short}} will have a default application policy policy similar to {{whonix_wiki
|wikipage=Dev/Default_Application_Policy
|text=Whonix default application policy
}}.

However, Firefox should be preferred for reasons other than security and privacy, see [[Miscellaneous_Threats_to_User_Freedom#Beyond_Licensing|threats to user freedom thorough market share domination]]. [[Dev/Chromium#Chromium_reduced_capabilities_to_plugin_with_adblocker|In future, Firefox might have better advertisement blocking capabilities?]]

See also these [[Dev/Chromium|Chromium considerations]].

Therefore the decision which browser to install by default in {{project_name_short}} is a difficult one.

To not let the perfect be the enemy of the good,

Nowadays Firefox is installed by default due to [[Dev/Chromium#Chromium_Debian_Package_Security|Chromium Debian Package Security]].

The decision is based on practicality, available resources, achievable initial goals. It is a significant development effort to create a dedicated website for {{project_name_short}} and to create a new Linux distribution. {{project_name_short}} doesn't have to find solutions to the difficult mostly globally unaddressed [[Miscellaneous Threats to User Freedom]] right from the start.

See also [[#Potential Future Solutions]] which might be implemented in later stages of the development.

== Disregarded Solutions ==
=== no browser installed by default ===

* That would be a terrible user experience, specifically for Live ISO / USB users, waiting until all browser related packages are downloaded and installed using APT. Users want ready to go solution. The fact that they already have to invest time to get a new operating system is already a barrier. Asking them to wait till a browser downloads is too much.

=== install both firefox-esr and chromium by default ===

* a waste of disk space
* longer update times as both packages are downloaded in the future
* not a strong stance against chromium

== Potential Future Solutions ==
Might be implemented in a later version but not in the initial versions.

=== Browser Choice Dialog ===

Similar to this:

https://upload.wikimedia.org/wikipedia/en/e/e2/BrowserChoice.gif

During the build process of {{project_name_short}} download (cache) both packages, firefox-esr and chormium but don't install these. This is to avoid avoid APT traffic and time wasted on network download. In more technical terms, similar to this:

<pre>
sudo apt update
sudo apt install --download-only firefox-esr
sudo apt install --download-only chromium
</pre>

The packages will then be cached but didn't actually install the packages. These downloaded packages files will reside in folder <code>/var/cache/apt/archives</code> and otherwise do nothing. Would be cleaned up once the user runs <code>sudo apt clean</code>.

That would work well for ISO release but not for installation from repository. The latter not sure how important long term, perhaps for servers (server vendors won't offer {{project_name_short}} pre-install very soon) but then for servers no browser is required.

Not sure yet this can work with the ISO build process.

Also after first boot there is a technical issue. Suppose users would run <code>sudo apt update</code> followed by <code>sudo apt full-upgrade</code> before ever starting a browser, which is recommended and good security practice. Then when running the browser choice dialog (through clicking browser icon in start menu)...

At this point the user most likely the browser choice tool cannot run <code>sudo apt install firefox-esr</code> or <code>sudo apt install chromium</code> on behalf of the user without network traffic. This is because dependencies, package versions changed meanwhile. (User run <code>sudo apt update</code> would have noticed that.) This decreases usability. Thereby the browser choice tool would be changed from <code>offline install previously downloaded browser package</code> to <code>network dependent download and install of browser</code>.

To keep the browser choice tool <code>offline install previously downloaded browser package</code> should the browser choice be a popup at first boot?

There might be technical solutions for all of this but this makes the default browser choice a major development task.

=== draft text for browser choice dialog ===
Not relevant yet since the browser choice dialog will not be implemented soon.

<blockquote> {{project_name_short}} supports any Debian compatible browser, but defaults to two major choices: Chromium and Firefox.

* Firefox - Pros: Keeps the web open and free as we know it. [https://madaidans-insecurities.github.io/firefox-chromium.html Less secure.]

* Chromium - Pros: More secure. Cons: Increases [[Miscellaneous_Threats_to_User_Freedom#chromium|Google's influence, which may harm user freedom and choice in the future]].

Please make a selection:

[x] Firefox<br />
[ ] Chromium<br />
[ ] Do not install any browser at this time<br />
[ ] Do not ask again<br />
[ ] Quit<br />
</blockquote>

Domain name will change go kicksecure.com.

= Comparison of Browsers =
== Original Firefox ==

'''Trademark Disclaimer:''' Kicksecure is not officially associated with Mozilla Firefox. See [[#Disclaimer|Disclaimer]].

'''advantages:'''

{{quotation
|quote=keeping the firefox branding and improving upon it might be more user friendly than shipping unpopular brand browsers.
|context=https://github.com/Kicksecure/security-misc/issues/192#issuecomment-1910675642
}}

'''issues:'''

* '''trademark issues:'''
** '''With Debian:''' Past trademark nonsense by Mozilla, see [https://en.wikipedia.org/wiki/Debian%E2%80%93Mozilla_trademark_dispute Debian–Mozilla trademark dispute]. Was resolved and hopefully will not happen again.
** '''With LibreFox:''' What happened? See [[#LibreFox|LibreFox]].
** '''Future:''' [[Dev/Default_Browser#Firefox_Potential_Legal_Risk|Firefox Potential Legal Risk]]

'''disadvantages:'''

* '''Promotes non-freedom software:''' Easily downloads the non-freedom [https://www.fsf.org/campaigns/drm.html DRM] plugin from Google. Related: [[Avoid nonfreedom software|avoid non-freedom software]]
** https://support.mozilla.org/en-US/kb/enable-drm
** DRM test website: https://bitmovin.com/demos/drm
* '''Needs hardening:''' Not as hardened by default (lower attack surface, disabled telemetry) as it could be creating demand for a hardened Firefox fork or Firefox settings project such as arkenfox.

'''Enabling non-freedom DRM is just 1 click away:'''

{{quotation
|quote=You must enable DRM to play some audio or video on this page. [https://support.mozilla.org/en-US/kb/enable-drm Learn more] <code>[Enable DRM]</code>
|context=Firefox when visiting a DRM test website
}}

'''TODO:'''

* As part of taming Firefox, a Firefox settings project such as arkenfox or Firefox might make it harder to accidentally enable DRM?

=== Firefox directly from Upstream Mozilla using Flatpak ===
'''advantages:'''

* Fast stable Firefox upgrades directly from upstream, Mozilla.

'''issues:'''

* Most likely ignores <code>/etc/firefox</code> settings folder. It is most likely possible to add a workaround for that.

'''See also:'''

* [[Install_Software#Flatpak|Flatpak]]

=== Firefox directly from Upstream Mozilla using packages.mozilla.org ===
advantages:

* Fast stable Firefox upgrades directly from upstream, Mozilla.

potential issues:

* TODO: Does it honor <code>/etc/firefox</code> settings folder? It might not as this might only be a feature by Debian's firefox-esr package.

disadvantages:

* Same as in above wiki chapter.
* [[Install_Software#Foreign_Sources|Foreign Sources]]

=== Firefox from packages.debian.org ===
Also when using Debian's Firefox package, enabling non-freedom software DRM is just 1 click away.

=== Disclaimer ===
{{firefox_legal_disclaimer}}

=== Firefox Potential Legal Risk ===
Background story: [https://en.wikipedia.org/wiki/Debian%E2%80%93Mozilla_trademark_dispute Debian–Mozilla trademark dispute] (resolved in 2017)

Quote:

{{quotation|quote=
= About the Debian specific patches =

Mozilla recognizes that patches applied to Iceweasel/Firefox don't
impact the quality of the product.
Patches which should be reported upstream to improve the product always
have been forward upstream by the Debian packagers. Mozilla agrees about
specific patches to facilitate the support of Iceweasel on architecture
supported by Debian or Debian-specific patches.

More generally, Mozilla trusts the Debian packagers to use their best
judgment to achieve the same quality as the official Firefox binaries.

In case of derivatives of Debian, Firefox branding can be used as long
as the patches applied are in the same category as described above.
Ubuntu having a different packaging, this does not apply to that
distribution.
|context=Debian issue tracker, [https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=815006 Renaming Iceweasel to Firefox]
}}

Opinion by a non-lawyer:

The phrasing <code>can be used as long as the patches applied are in the same category as described above</code> could be interpreted as in a patch which disables all telemetry, tracking and phone-home as much as possible would be in a different category and hence might in the viewpoint of Mozillla violate their trademark.

'''[https://github.com/portapps/phyrox-portable/issues/11 Mozilla vs portapps.io]''' from 2019

{{quotation
|quote=Following a trademark violation report ([https://github.com/portapps/phyrox-portable/issues/11 #11]) from Mozilla, Firefox portable has been named Phyrox portable on Portapps. Nothing changes except its name.
|context=[https://github.com/portapps/phyrox-portable phyrox-portable]
}}

{{quotation
|quote=
But even modest changes to preferences (such as whether "Know Your Rights" information is displayed to users) are sufficient to violate our policy against distributing modified versions of Mozilla software with our trademarks. Of course, end-users may choose to change preferences and settings in Firefox. But we don't allow others to distribute unofficial versions of "Firefox" with modified configurations or preferences.
|context=[https://github.com/portapps/phyrox-portable/issues/11#issuecomment-550461232 phyrox-portable published an e-mail from a Mozilla attorney.]
}}

Does this apply to Linux distributions that is not really primarily about distributing Firefox? Probably yes, since Mozilla had also a past conflict with Debian.

{{quotation
|quote=
Changes requiring Mozilla’s prior written permission include (but are not limited to):

* Changing the default home page or adding bookmarks,
|context=[https://www.mozilla.org/en-US/foundation/trademarks/distribution-policy/ Mozilla Trademark Distribution Policy]
}}

Potentially also [[#LibreFox|Mozilla vs LibreFox]] had a trademark conflict.

=== Correspondence with Mozilla about its Trademark ===
==== 15 February 2024 ====
From:

<pre>
adrelanos
</pre>

To:

<pre>
trademark-permissions@mozilla.com
</pre>

subject:

<pre>
Kicksecure Default Browser Configuration Trademark Question
</pre>

body:

<pre>
I am the lead developer of the Kicksecure project, a Linux distribution focused on security and based on Debian. Kicksecure is developed by the same team as Whonix, which is somewhat more well-known.

Our hardened defaults extend to the default user applications on the system, including a daily drivable web browser.

We are currently in the process of reviewing and considering potential candidates to be the default web browser on Kicksecure.

With good intentions, various Kicksecure contributors have suggested shipping Mozilla Firefox as the default browser. However, some contributors, including myself, are concerned about the modifications to Firefox's default settings we intend to make, versus Mozilla's Trademark Policy. We have no intention of rebranding or changing the compilation options of Firefox binaries. In fact, we prefer to keep the Mozilla trademarked names for the products to provide our users with a sense of familiarity.

We would acquire unaltered binaries from one of the following sources:

- Debian's official packages.debian.org repository
- Mozilla's official packages.mozilla.org repository
- Mozilla's official Firefox Flathub repository

Ideally, we would use Mozilla sources.

Here is a trademark-respecting list of things we are aware of and want to avoid for understandable reasons:

* Not using Mozilla trademarks in the name of our business, product, service, app, domain name, publication, or other offering.
* Not using marks, logos, company names, slogans, domain names, or designs that are confusingly similar to Mozilla trademarks.
* Not using Mozilla trademarks in a way that incorrectly implies affiliation with, or sponsorship, endorsement, or approval by Mozilla of our products or services.
* Not displaying Mozilla trademarks more prominently than our product, service, or company name.
* Not using Mozilla trademarks on merchandise for sale (e.g., selling t-shirts, mugs, etc.)
* Not using Mozilla trademarks for any other form of commercial use (e.g., offering technical support services), unless such use is limited to a truthful and descriptive reference (e.g., “Independent technical support for Mozilla’s Firefox browser”).
* Not modifying Mozilla’s trademarks, abbreviating them, or combining them with any other symbols, words, or images, or incorporating them into a tagline or slogan.

And here is a list of things that we would like to do. Our primary intention is to have a default policy (or employ other means if more appropriate) to do the following:

* Use unaltered binaries.
* Disable all Telemetry, Studies, Reports, and non-essential implicit outgoing connections.
* Force install the addon "uBlock Origin" by Raymond Hill.
* Set and lock hardened SSL/TLS-related settings, including, but not limited to, setting HTTPS-only mode as the default, blocking mixed content, not trusting unsafe negotiations, disabling unencrypted background requests, etc.
* Disable sponsored components, like bookmarks and suggestions.
* Set and lock strict mode for ETP.
* Change the default homepage.
* Disable the default display of the "Know Your Rights" information page.

As an illustrative point of how specifically we plan to apply these changes:

- Our intended changes would be made by providing a separate package (for example, named "hardened-browser-config").
- This package would install config file(s) in folder(s) such as /etc/firefox or /etc/firefox-esr.
- The package would be installed by default.

We are willing to elaborate on the details and consider making modifications upon request by Mozilla.

We are not asking for any special permission that does not extend to derivatives. As stated on the Debian issue tracker:

> In case of derivatives of Debian, Firefox branding can be used as long
> as the patches applied are in the same category as described above.

This is related to the Debian Free Software Guidelines (DFSG) (item 8):

> License must not be specific to Debian
>
> The rights attached to the program must not depend on the program's being part of a Debian system. If the program is extracted from Debian and used or distributed without Debian but otherwise within the terms of the program's license, all parties to whom the program is redistributed should have the same rights as those that are granted in conjunction with the Debian system.

We would like to be able to state similarly:

> In case of derivatives of Kicksecure, Firefox branding can be used as long as the patches applied are in the same category as described above.

We are asking for your opinion on whether this would be in conflict with Mozilla's Trademark Policy.

We intend to publish our correspondence for the sake of transparency. Our communications and your responses will be publicized in full, verbatim, without modifications.
</pre>

== arkenfox ==
https://github.com/arkenfox/user.js

A settings file improving Firefox security and privacy.

'''todo'''

'''advantages:'''

* disabled telemetry by default

'''issues:'''

* Phone home. Does not do anything about Firefox phone home. [https://github.com/arkenfox/user.js/issues/1807 Feature Request: Radio Silence by Default for Browser Startup and Background Connections aka "Disable Phone Home"] got instantly closed, rejected and locked for further discussion.
** https://github.com/arkenfox/user.js/issues/917 was deleted but is still available on https://web.archive.org/web/20210602135212/https://github.com/arkenfox/user.js/issues/917#issuecomment-609087428
*** also deleted:
**** https://web.archive.org/web/20210602135212/https://github.com/arkenfox/user.js/issues/892
**** https://web.archive.org/web/20210602135212/https://github.com/arkenfox/user.js/issues/893

'''non-issues:'''

* https://github.com/arkenfox/user.js/issues/1795
* Telemetry. Ticket https://github.com/arkenfox/user.js/issues/1660 is confusing but it's not about enabling telemetry. Only about moving it to its own section in the config file. Which is more like a textual, stylistic change.
* using <code>pref(</code> instead of <code>user_pref(</code> is not an issue as per https://github.com/Kicksecure/security-misc/pull/183#issuecomment-1895948795

That could easily be handeld during the package build process with something like this:

<pre>
search='pref("'
replace='user_pref("'
file_name='user.js'
str_replace "$search" "$replace" "$file_name"
</pre>

The <code>diff</code> would be reasonably simple.

== deskapps-harden ==
https://github.com/monsieuremre/deskapps-harden

A settings file improving Firefox security and privacy.

'''todo:'''

* discuss if settings locking is really neccessary: https://github.com/Kicksecure/security-misc/issues/192#issuecomment-1905981518

'''advantages:'''

* responsive upstream
* founded by Kicksecure contributor
* clean, small, policy, single 1 file

'''disadvantages:'''

* new project
* few users, bug reports, feature requests yet, hence difficult to judge the merits of the project
* no known third-party reviews yet
* project name might be too limiting to gain lots of non-Kicksecure users using the same, which would be an advantage to get more users (fingerprint shared by moer users and hopefully more review, suggestions)

== LibreWolf ==
Lags behind Firefox a few days up to 1 week.

{{quotation
|quote=Regarding Librewolf’s slow updates, I think this issue has been very greatly exaggerated, having used it as one of my browsers for almost over 30 months, I personally do not recall it ever really being more than one week behind Firefox, usually it is only a couple working days at worst.
|context=https://github.com/Kicksecure/security-misc/issues/192#issuecomment-1910407278
}}

LibreWolf feature request: [https://codeberg.org/librewolf/issues/issues/1779 Radio Silence by Default for Browser Startup and Background Connections aka "Disable Phone Home" #1779]

Bugs reported to only be reproducible in LibreWolf but not in Firefox:

* https://codeberg.org/librewolf/issues/issues/1769

Bugs maybe specific to LibreWolf only but not Firefox:

* https://codeberg.org/librewolf/issues/issues/1774

== LibreFox ==
https://github.com/intika/Librefox is dead as per https://github.com/intika/Librefox/issues/141

https://librewolf-community.gitlab.io/ is active.

LibreFox had a potential legal issue with Mozilla:

* https://github.com/intika/Librefox/commit/45a4d3ce647b8c896e81ce3e5ac5ddc95ff045e0 mentions legal issues.
* question about it: https://github.com/intika/Librefox/issues/125#issuecomment-1913347606

[https://github.com/intika intika], the developer of Librefox disappeared. The website [https://linuxhacks.org/ linuxhacks.org] is still online so one could assume that someone is still paying the bills. Still active on [https://stackexchange.com/users/3950473/intika?tab=activity stackexchange].

== Mullvad Browser ==
https://mullvad.net/en/browser

'''{{project_name_short}} user documentation:''' [[Mullvad Browser]]

'''Advantages:'''

* anti-browser fingerprinting
* It seems unlikely that the project will be deprecated because Mullvad exists as a company already for a long time.
* VPN
** Does not enforce using a VPN by default.
* Security slider

'''Disadvantages:'''

* VPN
** Could confuse users to believe they are using a VPN by default they are not. When using a Mullvad Browser it seems reasonable to assume that a browser developed by VPN provider Mullvad would use Mullvad VPN by default.
* Based on Firefox ESR (extended support release).
* Not vendor neutral
** Comes with branding 
*** default browser homepage
**** <blockquote>MULLVAD BROWSER</blockquote>
**** <blockquote>Developed in collaboration between the Tor Project and Mullvad VPN</blockquote>
*** Comes with Mullvad Browser extension by default.
**** <code>Disable Mullvad DoH (encrypted DNS)</code>
* DNS
** [https://mullvad.net/en/help/dns-over-https-and-dns-over-tls#when-to-use DoH (DNS over HTTPS) enabled by default]
** Used Mullvad for DNS by default.
** Could be controversial.
** If Kicksecure was to change DNS settings by default it should do so system with for consistency and not only in the browser.
** See also: [[DNS_Security]]
** related: [https://forums.whonix.org/t/use-dnscrypt-by-default-in-kicksecure-not-whonix/8117 Use DNSCrypt by default in Kicksecure? (not Whonix!)]

'''Other:'''

* comes with ublock origin by default
** but not enabled by default

'''Packaging Mullvad Browser (MB):'''

* That would need to be done, maintained by upstream. Since MB is similar to TB (Tor Browser) where a `.deb` feature request is ~ 11 years old and rejected, my hopes aren't so high that this is going to happen. Happy to be wrong about this.
* https://github.com/mullvad/mullvad-browser/issues/133
* https://github.com/mullvad/mullvad-browser/issues/201

'''related:'''

* https://forums.kicksecure.com/t/tor-project-is-resurrecting-secbrowser-as-mullvad-browser/101
* https://github.com/Kicksecure/tb-updater/issues/25
* https://github.com/Kicksecure/tb-updater/pull/26

== Tor Browser ==
Not an option by default in Kicksecure because it is torified, hence slow. For that use case it would be better to use [[Whonix]]. See also [[Privacy|Privacy Goals and Non-Goals of Kicksecure]].

However, easily installable, opt-in for users of Kicksecure, see [[Tor Browser]].

== Unbranded or Rebranded Browser ==
Not an option because difficult, time consuming to unbrand for example Mullvad Browser, compile it. High maintenance effort. Not justified with the current available project resources.

== Waterfox ==
https://www.waterfox.net/

TODO: ?

== ffprofile.com ==
https://ffprofile.com/

https://github.com/allo-/ffprofile

TODO: ?

== GNUzilla ==
* https://www.gnu.org/software/gnuzilla/
* https://directory.fsf.org/wiki/Gnuzilla

TODO: ?

== pyllyukko user.js ==
https://github.com/pyllyukko/user.js

no phone home feature request: https://github.com/pyllyukko/user.js/issues/509#issuecomment-1947855378

== More ==
* https://codeberg.org/rusty-snake/firefox-config
* https://github.com/crssi/Firefox
* https://github.com/yokoffing/Betterfox

TODO: ?

= Criteria =
Primary importance for Kicksecure must be security. Anti-fingerprinting is nice but secondary. Disabled telemetry can be considered a security feature since it lowers attack surface and a privacy feature.

See also [[Privacy|Privacy Goals and Non-Goals of Kicksecure]].

= Discussions =
* https://forums.whonix.org/t/chromium-browser-for-kicksecure-discussions-not-whonix/10388
* https://github.com/Kicksecure/security-misc/issues/192

= See Also =
* https://www.unixsheikh.com/articles/choose-your-browser-carefully.html
** https://archive.is/lTOFc

= Related =
* [[Chrome]]
* [[Chromium]]
* [[Dev/Chromium]]
* [[Dev/Default Browser]]
* [[Google Chrome Repository Insecurity|Google Chrome Repository Insecurity]]
* https://forums.whonix.org/t/chromium-browser-for-kicksecure-discussions-not-whonix/10388


[[Category:Design]]

{{Footer}}