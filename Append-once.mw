{{Header}}
{{title|title=
append-once
}}
{{#seo:
|description=The <code>append-once</code> script is a helper tool that safely appends a line to a file without duplicating entries. It features sanity checks, atomic write operations, and a simplified interface.
}}
{{intro|
<code>append-once</code> is a shell utility that appends a line to a file only once. It is useful for scripts that need to modify configuration files or other persistent files without introducing duplicate lines.
}}

= Introduction =
[https://github.com/Kicksecure/helper-scripts/blob/master/usr/bin/append-once <code>append-once</code>]:

* Appends once and is supposed to avoid duplicating the same content, should the exact same lines have already been appended earlier.
* Includes additional sanity testing (checks if the folder where the file resides is writable; checks if the file is readable and writable).
* Offers an easier-to-use interface. <ref>
[1] No need to use:

* <code>grep</code>
* considering special characters in <code>grep</code>
* <code>printf</code>
* pipe
* <code>>/dev/null</code> redirection.
</ref>
* Write operations are atomic.
* Its write operation is similar to:

<pre>
printf "%s\n" "text to append" | sponge -a /file/to/append/to >/dev/null
</pre>

= Target Audience =
{{AdvancedUsersOnly}}

If <code>append-once</code> is used in security critical context it should only be used by people capable of reviewing its relatively short and is simple source code.

= Syntax =
<pre>
append-once /path/to/file 'line to append'
</pre>

= Example =
{{CodeSelect|code=
append-once ~/testfile 'some text here'
}}

= Exit Codes =
* 0: Success.
* Non-Zero: Failure.

= Limitations =
* Did not support multi-line (with empty lines) at time of writing. Test before use.

= Footnotes =
<references />
[[Category:Documentation]]
{{Footer}}